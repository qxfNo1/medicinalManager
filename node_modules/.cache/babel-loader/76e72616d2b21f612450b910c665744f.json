{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/list/style\";\nimport _List from \"antd/es/list\";\nvar _jsxFileName = \"D:\\\\studyFiles\\\\\\u524D\\u7AEF\\\\react-guli\\\\code\\\\admin-client_final\\\\src\\\\pages\\\\product\\\\detail.jsx\";\nimport React, { Component } from 'react';\nimport LinkButton from '../../components/link-button';\nimport { BASE_IMG_URL } from '../../utils/constants';\nimport { reqCategory } from '../../api';\nconst Item = _List.Item;\n/*\nProduct的详情子路由组件\n */\n\nexport default class ProductDetail extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      cName1: '',\n      // 一级分类名称\n      cName2: '' // 二级分类名称\n\n    };\n  }\n\n  async componentDidMount() {\n    // 得到当前商品的分类ID\n    const {\n      pCategoryId,\n      categoryId\n    } = this.props.location.state.product;\n\n    if (pCategoryId === '0') {\n      // 一级分类下的商品\n      const result = await reqCategory(categoryId);\n      const cName1 = result.data.name;\n      this.setState({\n        cName1\n      });\n    } else {\n      // 二级分类下的商品\n\n      /*\n      //通过多个await方式发多个请求: 后面一个请求是在前一个请求成功返回之后才发送\n      const result1 = await reqCategory(pCategoryId) // 获取一级分类列表\n      const result2 = await reqCategory(categoryId) // 获取二级分类\n      const cName1 = result1.data.name\n      const cName2 = result2.data.name\n      */\n      // 一次性发送多个请求, 只有都成功了, 才正常处理\n      const results = await Promise.all([reqCategory(pCategoryId), reqCategory(categoryId)]);\n      const cName1 = results[0].data.name;\n      const cName2 = results[1].data.name;\n      this.setState({\n        cName1,\n        cName2\n      });\n    }\n  }\n\n  render() {\n    // 读取携带过来的state数据\n    const {\n      name,\n      desc,\n      price,\n      detail,\n      imgs\n    } = this.props.location.state.product;\n    const {\n      cName1,\n      cName2\n    } = this.state;\n    const title = /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(LinkButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      type: \"arrow-left\",\n      style: {\n        marginRight: 10,\n        fontSize: 20\n      },\n      onClick: () => this.props.history.goBack(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, \"\\u5546\\u54C1\\u8BE6\\u60C5\"));\n    return /*#__PURE__*/React.createElement(_Card, {\n      title: title,\n      className: \"product-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u540D\\u79F0:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, name)), /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u63CF\\u8FF0:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, desc)), /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u4EF7\\u683C:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, price, \"\\u5143\")), /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, \"\\u6240\\u5C5E\\u5206\\u7C7B:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, cName1, \" \", cName2 ? ' --> ' + cName2 : '')), /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u56FE\\u7247:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, imgs.map(img => /*#__PURE__*/React.createElement(\"img\", {\n      key: img,\n      src: BASE_IMG_URL + img,\n      className: \"product-img\",\n      alt: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u8BE6\\u60C5:\"), /*#__PURE__*/React.createElement(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: detail\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["D:/studyFiles/前端/react-guli/code/admin-client_final/src/pages/product/detail.jsx"],"names":["React","Component","LinkButton","BASE_IMG_URL","reqCategory","Item","ProductDetail","state","cName1","cName2","componentDidMount","pCategoryId","categoryId","props","location","product","result","data","name","setState","results","Promise","all","render","desc","price","detail","imgs","title","marginRight","fontSize","history","goBack","map","img","__html"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {\n  Card,\n  Icon,\n  List\n} from 'antd'\n\nimport LinkButton from '../../components/link-button'\nimport {BASE_IMG_URL} from '../../utils/constants'\nimport {reqCategory} from '../../api'\n\nconst Item = List.Item\n\n\n/*\nProduct的详情子路由组件\n */\nexport default class ProductDetail extends Component {\n\n  state = {\n    cName1: '', // 一级分类名称\n    cName2: '', // 二级分类名称\n  }\n\n  async componentDidMount () {\n\n    // 得到当前商品的分类ID\n    const {pCategoryId, categoryId} = this.props.location.state.product\n    if(pCategoryId==='0') { // 一级分类下的商品\n      const result = await reqCategory(categoryId)\n      const cName1 = result.data.name\n      this.setState({cName1})\n    } else { // 二级分类下的商品\n      /*\n      //通过多个await方式发多个请求: 后面一个请求是在前一个请求成功返回之后才发送\n      const result1 = await reqCategory(pCategoryId) // 获取一级分类列表\n      const result2 = await reqCategory(categoryId) // 获取二级分类\n      const cName1 = result1.data.name\n      const cName2 = result2.data.name\n      */\n\n      // 一次性发送多个请求, 只有都成功了, 才正常处理\n      const results = await Promise.all([reqCategory(pCategoryId), reqCategory(categoryId)])\n      const cName1 = results[0].data.name\n      const cName2 = results[1].data.name\n      this.setState({\n        cName1,\n        cName2\n      })\n    }\n\n  }\n\n  render() {\n\n    // 读取携带过来的state数据\n    const {name, desc, price, detail, imgs} = this.props.location.state.product\n    const {cName1, cName2} = this.state\n\n    const title = (\n      <span>\n        <LinkButton>\n          <Icon\n            type='arrow-left'\n            style={{marginRight: 10, fontSize: 20}}\n            onClick={() => this.props.history.goBack()}\n          />\n        </LinkButton>\n\n        <span>商品详情</span>\n      </span>\n    )\n    return (\n      <Card title={title} className='product-detail'>\n        <List>\n          <Item>\n            <span className=\"left\">商品名称:</span>\n            <span>{name}</span>\n          </Item>\n          <Item>\n            <span className=\"left\">商品描述:</span>\n            <span>{desc}</span>\n          </Item>\n          <Item>\n            <span className=\"left\">商品价格:</span>\n            <span>{price}元</span>\n          </Item>\n          <Item>\n            <span className=\"left\">所属分类:</span>\n            <span>{cName1} {cName2 ? ' --> '+cName2 : ''}</span>\n          </Item>\n          <Item>\n            <span className=\"left\">商品图片:</span>\n            <span>\n              {\n                imgs.map(img => (\n                  <img\n                    key={img}\n                    src={BASE_IMG_URL + img}\n                    className=\"product-img\"\n                    alt=\"img\"\n                  />\n                ))\n              }\n            </span>\n          </Item>\n          <Item>\n            <span className=\"left\">商品详情:</span>\n            <span dangerouslySetInnerHTML={{__html: detail}}>\n            </span>\n          </Item>\n\n        </List>\n      </Card>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}