{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\n\n/*\n要求: 能根据接口文档定义接口请求\n包含应用中所有接口请求函数的模块\n每个函数的返回值都是promise\n\n基本要求: 能根据接口文档定义接口请求函数\n */\nimport jsonp from 'jsonp';\nimport ajax from './ajax'; // const BASE = 'http://localhost:5000'\n\nconst BASE = ''; // 登陆\n\n/*\nexport function reqLogin(username, password) {\n  return ajax('/login', {username, password}, 'POST')\n}*/\n\nexport const reqLogin = (username, password) => ajax(BASE + '/login', {\n  username,\n  password\n}, 'POST'); // 获取一级/二级分类的列表\n\nexport const reqCategorys = parentId => ajax(BASE + '/manage/category/list', {\n  parentId\n}); // 添加分类\n\nexport const reqAddCategory = (categoryName, parentId) => ajax(BASE + '/manage/category/add', {\n  categoryName,\n  parentId\n}, 'POST'); // 更新分类\n\nexport const reqUpdateCategory = ({\n  categoryId,\n  categoryName\n}) => ajax(BASE + '/manage/category/update', {\n  categoryId,\n  categoryName\n}, 'POST'); // 获取一个分类\n\nexport const reqCategory = categoryId => ajax(BASE + '/manage/category/info', {\n  categoryId\n}); // 获取商品分页列表\n\nexport const reqProducts = (pageNum, pageSize) => ajax(BASE + '/manage/product/list', {\n  pageNum,\n  pageSize\n}); // 更新商品的状态(上架/下架)\n\nexport const reqUpdateStatus = (productId, status) => ajax(BASE + '/manage/product/updateStatus', {\n  productId,\n  status\n}, 'POST');\n/*\n搜索商品分页列表 (根据商品名称/商品描述)\nsearchType: 搜索的类型, productName/productDesc\n */\n\nexport const reqSearchProducts = ({\n  pageNum,\n  pageSize,\n  searchName,\n  searchType\n}) => ajax(BASE + '/manage/product/search', {\n  pageNum,\n  pageSize,\n  [searchType]: searchName\n}); // 搜索商品分页列表 (根据商品描述)\n\n/*export const reqSearchProducts2 = ({pageNum, pageSize, searchName}) => ajax(BASE + '/manage/product/search', {\n  pageNum,\n  pageSize,\n  productDesc: searchName,\n})*/\n// 删除指定名称的图片\n\nexport const reqDeleteImg = name => ajax(BASE + '/manage/img/delete', {\n  name\n}, 'POST'); // 添加/修改商品\n\nexport const reqAddOrUpdateProduct = product => ajax(BASE + '/manage/product/' + (product._id ? 'update' : 'add'), product, 'POST'); // 修改商品\n// export const reqUpdateProduct = (product) => ajax(BASE + '/manage/product/update', product, 'POST')\n// 获取所有角色的列表\n\nexport const reqRoles = () => ajax(BASE + '/manage/role/list'); // 添加角色\n\nexport const reqAddRole = roleName => ajax(BASE + '/manage/role/add', {\n  roleName\n}, 'POST'); // 添加角色\n\nexport const reqUpdateRole = role => ajax(BASE + '/manage/role/update', role, 'POST'); // 获取所有用户的列表\n\nexport const reqUsers = () => ajax(BASE + '/manage/user/list'); // 删除指定用户\n\nexport const reqDeleteUser = userId => ajax(BASE + '/manage/user/delete', {\n  userId\n}, 'POST'); // 添加/更新用户\n\nexport const reqAddOrUpdateUser = user => ajax(BASE + '/manage/user/' + (user._id ? 'update' : 'add'), user, 'POST');\n/*\njson请求的接口请求函数\n */\n\nexport const reqWeather = city => {\n  return new Promise((resolve, reject) => {\n    const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p49MVra6urFRGOT9s8UBWr2`; // 发送jsonp请求\n\n    jsonp(url, {}, (err, data) => {\n      console.log('jsonp()', err, data); // 如果成功了\n\n      if (!err && data.status === 'success') {\n        // 取出需要的数据\n        const {\n          dayPictureUrl,\n          weather\n        } = data.results[0].weather_data[0];\n        resolve({\n          dayPictureUrl,\n          weather\n        });\n      } else {\n        // 如果失败了\n        _message.error('获取天气信息失败!');\n      }\n    });\n  });\n}; // reqWeather('北京')\n\n/*\njsonp解决ajax跨域的原理\n  1). jsonp只能解决GET类型的ajax请求跨域问题\n  2). jsonp请求不是ajax请求, 而是一般的get请求\n  3). 基本原理\n   浏览器端:\n      动态生成<script>来请求后台接口(src就是接口的url)\n      定义好用于接收响应数据的函数(fn), 并将函数名通过请求参数提交给后台(如: callback=fn)\n   服务器端:\n      接收到请求处理产生结果数据后, 返回一个函数调用的js代码, 并将结果数据作为实参传入函数调用\n   浏览器端:\n      收到响应自动执行函数调用的js代码, 也就执行了提前定义好的回调函数, 并得到了需要的结果数据\n */","map":{"version":3,"sources":["D:/studyFiles/前端/react-guli/code/admin-client_final/src/api/index.js"],"names":["jsonp","ajax","BASE","reqLogin","username","password","reqCategorys","parentId","reqAddCategory","categoryName","reqUpdateCategory","categoryId","reqCategory","reqProducts","pageNum","pageSize","reqUpdateStatus","productId","status","reqSearchProducts","searchName","searchType","reqDeleteImg","name","reqAddOrUpdateProduct","product","_id","reqRoles","reqAddRole","roleName","reqUpdateRole","role","reqUsers","reqDeleteUser","userId","reqAddOrUpdateUser","user","reqWeather","city","Promise","resolve","reject","url","err","data","console","log","dayPictureUrl","weather","results","weather_data","error"],"mappings":"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","sourcesContent":["/*\n要求: 能根据接口文档定义接口请求\n包含应用中所有接口请求函数的模块\n每个函数的返回值都是promise\n\n基本要求: 能根据接口文档定义接口请求函数\n */\nimport jsonp from 'jsonp'\nimport {message} from 'antd'\nimport ajax from './ajax'\n\n// const BASE = 'http://localhost:5000'\nconst BASE = ''\n// 登陆\n/*\nexport function reqLogin(username, password) {\n  return ajax('/login', {username, password}, 'POST')\n}*/\nexport const reqLogin = (username, password) => ajax(BASE + '/login', {username, password}, 'POST')\n\n// 获取一级/二级分类的列表\nexport const reqCategorys = (parentId) => ajax(BASE + '/manage/category/list', {parentId})\n\n// 添加分类\nexport const reqAddCategory = (categoryName, parentId) => ajax(BASE + '/manage/category/add', {categoryName, parentId}, 'POST')\n\n// 更新分类\nexport const reqUpdateCategory = ({categoryId, categoryName}) => ajax(BASE + '/manage/category/update', {categoryId, categoryName}, 'POST')\n\n// 获取一个分类\nexport const reqCategory = (categoryId) => ajax(BASE + '/manage/category/info', {categoryId})\n\n// 获取商品分页列表\nexport const reqProducts = (pageNum, pageSize) => ajax(BASE + '/manage/product/list', {pageNum, pageSize})\n\n// 更新商品的状态(上架/下架)\nexport const reqUpdateStatus = (productId, status) => ajax(BASE + '/manage/product/updateStatus', {productId, status}, 'POST')\n\n\n\n/*\n搜索商品分页列表 (根据商品名称/商品描述)\nsearchType: 搜索的类型, productName/productDesc\n */\nexport const reqSearchProducts = ({pageNum, pageSize, searchName, searchType}) => ajax(BASE + '/manage/product/search', {\n  pageNum,\n  pageSize,\n  [searchType]: searchName,\n})\n\n// 搜索商品分页列表 (根据商品描述)\n/*export const reqSearchProducts2 = ({pageNum, pageSize, searchName}) => ajax(BASE + '/manage/product/search', {\n  pageNum,\n  pageSize,\n  productDesc: searchName,\n})*/\n\n// 删除指定名称的图片\nexport const reqDeleteImg = (name) => ajax(BASE + '/manage/img/delete', {name}, 'POST')\n\n// 添加/修改商品\nexport const reqAddOrUpdateProduct = (product) => ajax(BASE + '/manage/product/' + ( product._id?'update':'add'), product, 'POST')\n// 修改商品\n// export const reqUpdateProduct = (product) => ajax(BASE + '/manage/product/update', product, 'POST')\n\n\n// 获取所有角色的列表\nexport const reqRoles = () => ajax(BASE + '/manage/role/list')\n// 添加角色\nexport const reqAddRole = (roleName) => ajax(BASE + '/manage/role/add', {roleName}, 'POST')\n// 添加角色\nexport const reqUpdateRole = (role) => ajax(BASE + '/manage/role/update', role, 'POST')\n\n\n// 获取所有用户的列表\nexport const reqUsers = () => ajax(BASE + '/manage/user/list')\n// 删除指定用户\nexport const reqDeleteUser = (userId) => ajax(BASE + '/manage/user/delete', {userId}, 'POST')\n// 添加/更新用户\nexport const reqAddOrUpdateUser = (user) => ajax(BASE + '/manage/user/'+(user._id ? 'update' : 'add'), user, 'POST')\n\n/*\njson请求的接口请求函数\n */\nexport const reqWeather = (city) => {\n\n  return new Promise((resolve, reject) => {\n    const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p49MVra6urFRGOT9s8UBWr2`\n    // 发送jsonp请求\n    jsonp(url, {}, (err, data) => {\n      console.log('jsonp()', err, data)\n      // 如果成功了\n      if (!err && data.status==='success') {\n        // 取出需要的数据\n        const {dayPictureUrl, weather} = data.results[0].weather_data[0]\n        resolve({dayPictureUrl, weather})\n      } else {\n        // 如果失败了\n        message.error('获取天气信息失败!')\n      }\n\n    })\n  })\n}\n// reqWeather('北京')\n/*\njsonp解决ajax跨域的原理\n  1). jsonp只能解决GET类型的ajax请求跨域问题\n  2). jsonp请求不是ajax请求, 而是一般的get请求\n  3). 基本原理\n   浏览器端:\n      动态生成<script>来请求后台接口(src就是接口的url)\n      定义好用于接收响应数据的函数(fn), 并将函数名通过请求参数提交给后台(如: callback=fn)\n   服务器端:\n      接收到请求处理产生结果数据后, 返回一个函数调用的js代码, 并将结果数据作为实参传入函数调用\n   浏览器端:\n      收到响应自动执行函数调用的js代码, 也就执行了提前定义好的回调函数, 并得到了需要的结果数据\n */"]},"metadata":{},"sourceType":"module"}